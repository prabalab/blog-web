<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Reset</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #f4f4f4;
        }

        /* Navbar Styles */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .logo a {
            font-size: 22px;
            font-weight: bold;
            color: white;
            text-decoration: none;
            transition: transform 0.3s ease-in-out;
        }

        .logo a:hover {
            transform: scale(1.1);
        }

        /* Navigation Menu */
        .menu {
            display: flex;
            gap: 20px;
        }

        .menu a {
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            position: relative;
            padding: 5px 0;
            transition: color 0.3s ease-in-out;
        }

        /* Underline Animation */
        .menu a::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -3px;
            width: 0;
            height: 2px;
            background: white;
            transition: all 0.3s ease-in-out;
            transform: translateX(-50%);
        }

        .menu a:hover::after {
            width: 100%;
        }

        .menu a:hover {
            color: #f1f1f1;
        }

        /* Hamburger Icon */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger div {
            width: 30px;
            height: 3px;
            background-color: white;
            margin: 5px 0;
            transition: 0.4s;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .menu {
                display: none;
                flex-direction: column;
                background: linear-gradient(135deg, #ff7e5f, #feb47b);
                position: absolute;
                top: 60px;
                right: 0;
                width: 200px;
                padding: 10px;
                border-radius: 5px;
                text-align: center;
                transition: transform 0.3s ease-in-out;
            }

            .menu.open {
                display: flex;
            }

            .hamburger {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
function Navbar() {
            const [isOpen, setIsOpen] = React.useState(false);

            return (
                <nav className="navbar">
                    <div className="logo">
                        <a href="#">My Blog</a>
                    </div>
                    
                    {/* Hamburger Menu */}
                    <div className="hamburger" onClick={() => setIsOpen(!isOpen)}>
                        <div style={{ transform: isOpen ? "rotate(45deg) translate(5px, 5px)" : "none" }}></div>
                        <div style={{ opacity: isOpen ? "0" : "1" }}></div>
                        <div style={{ transform: isOpen ? "rotate(-45deg) translate(5px, -5px)" : "none" }}></div>
                    </div>

                    {/* Navigation Links */}
              <div className={`menu ${isOpen ? "open" : ""}`}>
                 <a href="/">Home</a>
                  <a href="/login">Login</a>
                  <a href="/otp-reg">Registration</a>
                  <a href="/user-blog">Write Blog</a>
              </div>
                </nav>
            );
        };
        
        function PasswordReset() {
            const [email, setEmail] = React.useState("");
            const [otp, setOtp] = React.useState("");
            const [newPassword, setNewPassword] = React.useState("");
            const [step, setStep] = React.useState(1);

            const requestReset = async () => {
                try {
                    await axios.post("/api/usersreset/request-reset", { email });
                    alert("OTP sent to your email.");
                    setStep(2);
                } catch (error) {
                    alert(error.response.data.message);
                }
            };

            const verifyOtp = async () => {
                try {
                    await axios.post("/api/usersreset/verify-otp", { email, otp });
                    setStep(3);
                } catch (error) {
                    alert(error.response.data.message);
                }
            };

            const resetPassword = async () => {
                try {
                    await axios.post("/api/usersreset/reset-password", { email, otp, newPassword });
                    alert("Password reset successful!");
                    setStep(1);
                } catch (error) {
                    alert(error.response.data.message);
                }
            };

            return React.createElement("div", null,
                step === 1 && React.createElement("div", null,
                    React.createElement("h2", null, "Request Password Reset"),
                    React.createElement("input", { type: "email", placeholder: "Email", value: email, onChange: e => setEmail(e.target.value) }),
                    React.createElement("button", { onClick: requestReset }, "Send OTP")
                ),
                step === 2 && React.createElement("div", null,
                    React.createElement("h2", null, "Verify OTP"),
                    React.createElement("input", { type: "text", placeholder: "Enter OTP", value: otp, onChange: e => setOtp(e.target.value) }),
                    React.createElement("button", { onClick: verifyOtp }, "Verify OTP")
                ),
                step === 3 && React.createElement("div", null,
                    React.createElement("h2", null, "Reset Password"),
                    React.createElement("input", { type: "password", placeholder: "New Password", value: newPassword, onChange: e => setNewPassword(e.target.value) }),
                    React.createElement("button", { onClick: resetPassword }, "Reset Password")
                )
            );
        }

        const App = () => {
          return (
            <div>
              <Navbar />
              <PasswordReset />
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
